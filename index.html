<head>
    <meta charset="utf-8">
    <title>Cross Minder</title>

  <link href="favicon.ico" type="image/x-icon" rel="shortcut icon">

  <!-- bower:css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="bower_components/codemirror/lib/codemirror.css" />
    <link rel="stylesheet" href="bower_components/hotbox/hotbox.css" />
    <link rel="stylesheet" href="bower_components/kityminder-core/dist/kityminder.core.css" />
    <link rel="stylesheet" href="bower_components/angular-bootstrap-colorpicker/css/colorpicker.css" />
    <link rel="stylesheet" href="bower_components/kityminder-editor/dist/kityminder.editor.min.css" />
  <!-- endbower -->
  <!-- togetherjs -->
    <script src="https://togetherjs.com/togetherjs-min.js"></script>
  <!-- endtogetherjs -->

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        h1.editor-title {
            background: #393F4F;
            color: white;
            margin: 0;
            height: 40px;
            font-size: 14px;
            line-height: 40px;
            font-family: 'Hiragino Sans GB', 'Arial', 'Microsoft Yahei';
            font-weight: normal;
            padding: 0 20px;
        }
    </style>

    <!-- bower:js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src="bower_components/codemirror/lib/codemirror.js"></script>
    <script src="bower_components/codemirror/mode/xml/xml.js"></script>
    <script src="bower_components/codemirror/mode/javascript/javascript.js"></script>
    <script src="bower_components/codemirror/mode/css/css.js"></script>
    <script src="bower_components/codemirror/mode/htmlmixed/htmlmixed.js"></script>
    <script src="bower_components/codemirror/mode/markdown/markdown.js"></script>
    <script src="bower_components/codemirror/addon/mode/overlay.js"></script>
    <script src="bower_components/codemirror/mode/gfm/gfm.js"></script>
    <script src="bower_components/angular-ui-codemirror/ui-codemirror.js"></script>
    <script src="bower_components/marked/lib/marked.js"></script>
    <script src="bower_components/kity/dist/kity.js"></script>
    <script src="bower_components/hotbox/hotbox.js"></script>
    <script src="bower_components/json-diff/json-diff.js"></script>
    <script src="bower_components/kityminder-core/dist/kityminder.core.js"></script>
    <script src="bower_components/angular-bootstrap-colorpicker/js/bootstrap-colorpicker-module.js"></script>
    <script src="bower_components/kityminder-editor/dist/kityminder.editor.min.js"></script>
    <!-- endbower -->


    <script>
        angular.module('kityminderDemo', ['kityminderEditor', 'angular-meteor'])
            .controller('MainController', function($scope) {
              $scope.initEditor = function(editor, minder) {
                window.editor = editor;
                window.minder = minder;

                if(window.bootCrossMinder) {
                  window.bootCrossMinder(minder, editor, json_diff);
                }
              };

              $('#start-togetherjs').on('click', function(e) {
                TogetherJS(e.target);
                e.preventDefault();
                return false;
              })
            });
    </script>
</head>

<body ng-app="kityminderDemo" ng-controller="MainController">
    <h1 class="editor-title">
      <span>Cross Minder - Collaborative mind-map based on Meteor and KityMinder</span>
      <blaze-template class="pull-right" name="loginButtons"></blaze-template>
      <img class="pull-right" id="user-head" />
      <button id="start-togetherjs" class="pull-right btn-info">Start TogetherJS</button>
    </h1>
    <kityminder-editor on-init="initEditor(editor, minder)"></kityminder-editor>
</body>